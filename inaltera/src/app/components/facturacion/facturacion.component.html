<div class="cabecera">
    <h1>Facturación y Carga</h1>
    <h3>Crea nuevas facturas o sube PDFs para sellar</h3>

    <div class="menu">
        <div [ngClass]="{'activo': isElaborar}" (click)="cambiarVentana(0)"><mat-icon></mat-icon>Elaborar Factura</div>
        <div [ngClass]="{'activo': isCargar}" (click)="cambiarVentana(1)"><mat-icon></mat-icon>Cargar</div>
    </div>
</div>
<div class="contenido">
    <div>
        <h1>Nueva Factura</h1>
        <p>Completa los datos para generar una factura</p>
    </div>
    <form #facturaForm="ngForm">
        <div class="separado">
            <div *ngFor="let linea of lineasConceptos; let i = index" class="linea-contenedor">
                <label class="label-pequena">Línea {{i + 1}}</label>
                
                <div class="fila-concepto">
                    <select class="concepto" 
                            [(ngModel)]="linea.clienteId" 
                            [name]="'cliente' + i">
                        <option value="" disabled>Selecciona un cliente</option>
                        <option *ngFor="let c of clientes" [value]="c.id">{{c.nombre}}</option>
                    </select>

                    <input class="concepto" type="number" 
                        [(ngModel)]="linea.cantidad" 
                        [name]="'cant' + i" 
                        placeholder="1"/>

                    <input class="concepto" type="number" step="0.01" 
                        [(ngModel)]="linea.precio" 
                        [name]="'precio' + i" 
                        placeholder="0.00 €"/>

                    <div (click)="reducirConcepto(i)" *ngIf="lineasConceptos.length > 1" style="cursor:pointer">
                        <mat-icon>close</mat-icon>
                    </div>
                </div>
            </div>
        </div>

        <div class="cuadro-valores">
            <div class="valores subtotal">
                <div class="valor-nombre">Subtotal</div>
                <div class="valor">{{ subtotal | number:'1.2-2' }}€</div>
            </div>
            <div class="valores iva">
                <div class="valor-nombre">IVA (21%)</div>
                <div class="valor">{{ iva | number:'1.2-2' }}€</div>
            </div>
            <hr/>
            <div class="valores total">
                <div class="valor-nombre">Total</div>
                <div class="valor"><strong>{{ total | number:'1.2-2' }}€</strong></div>
            </div>
        </div>
    </form>
</div>
